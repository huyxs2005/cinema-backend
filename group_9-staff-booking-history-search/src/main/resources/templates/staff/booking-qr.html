<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{staff/layout :: layout('Thanh toán VietQR', ~{::content}, ~{::scripts})}">
    <th:block th:fragment="content">
        <div class="card">
            <div class="card-header">
                <h2>Thanh toán VietQR</h2>
                <p>Mã đơn: <strong th:text="${qr.bookingCode}">CODE</strong></p>
            </div>
            <div class="card-body qr-body"
                 th:data-booking-code="${qr.bookingCode}"
                 th:data-status-api="@{|/staff/api/bookings/${qr.bookingCode}/status|}"
                 th:data-expiry="${qr.expiresAt}">
                <div class="qr-image">
                    <img th:src="${qr.qrImageUrl}" alt="VietQR">
                    <div id="qrCountdown">10:00</div>
                </div>
                <div class="qr-info">
                    <p>Số tiền: <strong th:text="${#numbers.formatDecimal(qr.amount,0,'COMMA',0,'POINT')} + ' đ'">0</strong></p>
                    <p>Nội dung chuyển khoản:</p>
                    <div class="transfer-content" th:text="${qr.transferContent}">CB_CODE</div>
                    <div class="qr-actions">
                        <form th:action="@{|/staff/bookings/${qr.bookingCode}/mark-paid|}" method="post">
                            <button type="submit" class="btn-primary">Đã nhận tiền</button>
                        </form>
                        <form th:action="@{|/staff/bookings/${qr.bookingCode}/cancel|}" method="post">
                            <button type="submit" class="btn-danger">Huỷ đơn</button>
                        </form>
                        <a th:href="@{|/staff/bookings/${qr.bookingCode}|}" class="btn-secondary">Xem chi tiết</a>
                    </div>
                </div>
            </div>
        </div>
    </th:block>
    <th:block th:fragment="scripts">
        <script th:src="@{/staff/js/booking-qr.js}"></script>
    </th:block>
</th:block>
</html>
