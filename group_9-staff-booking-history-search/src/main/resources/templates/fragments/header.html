<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="main">
<nav class="navbar navbar-expand-lg navbar-dark cinema-navbar py-3">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" th:href="@{/}">
            <img th:src="@{/img/hitsuyou.svg}" alt="Cinema HUB Logo">
            <span>HUB</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#cinemaNav"
                aria-controls="cinemaNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-between" id="cinemaNav">
            <ul class="navbar-nav main-nav mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link"
                       th:classappend="${currentPath == '/' or currentPath == '/home'} ? ' active' : ''"
                       th:href="@{/}">Trang chủ</a>
                </li>
                <li class="nav-item"><a class="nav-link" href="#">Lịch chiếu</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Khuyến mãi</a></li>
                <li class="nav-item">
                    <a class="nav-link"
                       th:classappend="${currentPath == '/ticket-prices'} ? ' active' : ''"
                       th:href="@{/ticket-prices}">Giá vé</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link"
                       th:classappend="${currentPath == '/about'} ? ' active' : ''"
                       th:href="@{/about}">Giới thiệu</a>
                </li>
            </ul>

            <div class="auth-buttons d-flex align-items-center">
                <div id="authActionButtons" class="d-flex gap-2">
                    <button class="btn btn-outline-light" id="openRegisterModal" type="button">Đăng ký</button>
                    <button class="btn btn-danger" id="openLoginModal" type="button">Đăng nhập</button>
                </div>
                <div class="user-menu" id="userMenuWrapper">
                    <button class="user-menu-toggle" id="userMenuToggle" type="button">
                        <span class="user-avatar" aria-hidden="true"></span>
                        <span id="userMenuName">Tài khoản</span>
                        <span class="chevron"></span>
                    </button>
                    <div class="user-menu-dropdown" id="userMenuDropdown">
                        <button data-user-action="profile">Thông tin cá nhân</button>
                        <button data-user-action="admin" id="adminDashboardLink" class="hidden">Quản lý CRUD</button>
                        <button data-user-action="logout">Đăng xuất</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>
<div id="modalOverlay" class="modal-overlay">
    <div class="modal-card" id="loginModal" role="dialog" aria-modal="true">
        <button class="modal-close" data-modal-close type="button">&times;</button>
        <h2>Đăng nhập</h2>
        <form id="loginForm" class="form-stack" novalidate>
            <div class="input-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" placeholder="Email">
                <p class="input-hint" data-error-for="loginEmail"></p>
            </div>
            <div class="input-group">
                <label for="loginPassword">Mật khẩu</label>
                <div class="password-field">
                    <input type="password" id="loginPassword" placeholder="Mật khẩu">
                    <button type="button" class="password-toggle" aria-label="Hiện mật khẩu"
                            aria-pressed="false" data-toggle-target="loginPassword">
                        <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                             stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                            <circle cx="12" cy="12" r="3.5"/>
                        </svg>
                        <svg class="eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                             stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                            <circle cx="12" cy="12" r="3.5"/>
                            <path d="M3 3l18 18"/>
                        </svg>
                    </button>
                </div>
                <p class="input-hint" data-error-for="loginPassword"></p>
            </div>
            <div class="d-flex justify-content-end mb-3">
                <a href="/forgot-password" class="link-accent small">Quên mật khẩu?</a>
            </div>
            <button type="submit" class="btn btn-danger w-100">Đăng nhập</button>
        </form>
        <div id="loginMessage" class="form-alert mt-3"></div>
        <p class="mt-4 text-center text-light mb-0">Chưa có tài khoản?
            <button class="btn-link link-accent" data-open-modal="register" type="button">Đăng ký</button>
        </p>
    </div>

    <div class="modal-card" id="registerModal" role="dialog" aria-modal="true">
        <button class="modal-close" data-modal-close type="button">&times;</button>
        <h2>Đăng ký</h2>
        <form id="registerForm" class="form-stack" novalidate>
            <div class="dual-input">
                <div class="input-group">
                    <label for="registerFirstName">Họ</label>
                    <input type="text" id="registerFirstName" placeholder="Họ">
                    <p class="input-hint" data-error-for="registerFirstName"></p>
                </div>
                <div class="input-group">
                    <label for="registerLastName">Tên</label>
                    <input type="text" id="registerLastName" placeholder="Tên">
                    <p class="input-hint" data-error-for="registerLastName"></p>
                </div>
            </div>
            <div class="input-group">
                <label for="registerEmail">Email</label>
                <input type="email" id="registerEmail" placeholder="Email">
                <p class="input-hint" data-error-for="registerEmail"></p>
            </div>
            <div class="input-group">
                <label for="registerPhone">Số điện thoại</label>
                <input type="tel" id="registerPhone" placeholder="Số điện thoại" maxlength="11" inputmode="numeric" pattern="\d*" data-numeric-only="true">
                <p class="input-hint" data-error-for="registerPhone"></p>
            </div>
            <div class="dual-input">
                <div class="input-group">
                    <label for="registerPassword">Mật khẩu</label>
                    <div class="password-field">
                        <input type="password" id="registerPassword" placeholder="Mật khẩu">
                        <button type="button" class="password-toggle" aria-label="Hiện mật khẩu"
                                aria-pressed="false" data-toggle-target="registerPassword">
                            <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                                <circle cx="12" cy="12" r="3.5"/>
                            </svg>
                            <svg class="eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                                <circle cx="12" cy="12" r="3.5"/>
                                <path d="M3 3l18 18"/>
                            </svg>
                        </button>
                    </div>
                    <p class="input-hint" data-error-for="registerPassword"></p>
                </div>
                <div class="input-group">
                    <label for="registerConfirmPassword">Xác nhận mật khẩu</label>
                    <div class="password-field">
                        <input type="password" id="registerConfirmPassword" placeholder="Xác nhận mật khẩu">
                        <button type="button" class="password-toggle" aria-label="Hiện mật khẩu"
                                aria-pressed="false" data-toggle-target="registerConfirmPassword">
                            <svg class="eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                                <circle cx="12" cy="12" r="3.5"/>
                            </svg>
                            <svg class="eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                 stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7z"/>
                                <circle cx="12" cy="12" r="3.5"/>
                                <path d="M3 3l18 18"/>
                            </svg>
                        </button>
                    </div>
                    <p class="input-hint" data-error-for="registerConfirmPassword"></p>
                </div>
            </div>
            <button type="submit" class="btn btn-danger w-100">Đăng ký</button>
        </form>
        <div id="registerMessage" class="form-alert mt-3"></div>
        <p class="mt-4 text-center text-light mb-0">Đã có tài khoản?
            <button class="btn-link link-accent" data-open-modal="login" type="button">Đăng nhập</button>
        </p>
    </div>
</div>
</th:block>
</body>
</html>
